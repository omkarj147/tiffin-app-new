{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{FaUserAlt,FaTrash,FaBan,FaCheck}from'react-icons/fa';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import'./UserManagement.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserManagement=_ref=>{let{onBack}=_ref;const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[searchTerm,setSearchTerm]=useState('');useEffect(()=>{fetchUsers();},[]);const fetchUsers=async()=>{try{const token=localStorage.getItem('token');const response=await axios.get('http://localhost:5002/api/users',{headers:{Authorization:`Bearer ${token}`}});setUsers(response.data);}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Error fetching users');}finally{setLoading(false);}};const handleStatusChange=async(userId,newStatus)=>{try{const token=localStorage.getItem('token');await axios.put(`http://localhost:5002/api/users/${userId}/status`,{status:newStatus},{headers:{Authorization:`Bearer ${token}`}});setUsers(users.map(user=>user._id===userId?{...user,status:newStatus}:user));toast.success(`User ${newStatus==='active'?'activated':'suspended'} successfully`);}catch(error){var _error$response2,_error$response2$data;toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Error updating user status');}};const handleDeleteUser=async userId=>{if(!window.confirm('Are you sure you want to delete this user?'))return;try{const token=localStorage.getItem('token');await axios.delete(`http://localhost:5002/api/users/${userId}`,{headers:{Authorization:`Bearer ${token}`}});setUsers(users.filter(user=>user._id!==userId));toast.success('User deleted successfully');}catch(error){var _error$response3,_error$response3$data;toast.error(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Error deleting user');}};const filteredUsers=users.filter(user=>{var _user$name,_user$email;return((_user$name=user.name)===null||_user$name===void 0?void 0:_user$name.toLowerCase().includes(searchTerm.toLowerCase()))||((_user$email=user.email)===null||_user$email===void 0?void 0:_user$email.toLowerCase().includes(searchTerm.toLowerCase()));});if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"user-management\",children:[/*#__PURE__*/_jsx(ToastContainer,{position:\"top-right\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-management-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-button\",onClick:onBack,children:\"\\u2190 Back to Dashboard\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"User Management\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"search-bar\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search users...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"users-grid\",children:filteredUsers.map(user=>/*#__PURE__*/_jsxs(\"div\",{className:`user-card ${user.status}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-icon\",children:/*#__PURE__*/_jsx(FaUserAlt,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:user.name}),/*#__PURE__*/_jsx(\"p\",{children:user.email}),/*#__PURE__*/_jsxs(\"p\",{className:\"user-type\",children:[\"Type: \",user.userType]}),/*#__PURE__*/_jsxs(\"p\",{className:`user-status ${user.status}`,children:[\"Status: \",user.status]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-actions\",children:[user.status==='active'?/*#__PURE__*/_jsx(\"button\",{className:\"suspend-button\",onClick:()=>handleStatusChange(user._id,'suspended'),title:\"Suspend User\",children:/*#__PURE__*/_jsx(FaBan,{})}):/*#__PURE__*/_jsx(\"button\",{className:\"activate-button\",onClick:()=>handleStatusChange(user._id,'active'),title:\"Activate User\",children:/*#__PURE__*/_jsx(FaCheck,{})}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:()=>handleDeleteUser(user._id),title:\"Delete User\",children:/*#__PURE__*/_jsx(FaTrash,{})})]})]},user._id))}),filteredUsers.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"no-users\",children:searchTerm?'No users found matching your search.':'No users available.'})]});};export default UserManagement;","map":{"version":3,"names":["React","useState","useEffect","axios","FaUserAlt","FaTrash","FaBan","FaCheck","ToastContainer","toast","jsx","_jsx","jsxs","_jsxs","UserManagement","_ref","onBack","users","setUsers","loading","setLoading","searchTerm","setSearchTerm","fetchUsers","token","localStorage","getItem","response","get","headers","Authorization","data","error","_error$response","_error$response$data","message","handleStatusChange","userId","newStatus","put","status","map","user","_id","success","_error$response2","_error$response2$data","handleDeleteUser","window","confirm","delete","filter","_error$response3","_error$response3$data","filteredUsers","_user$name","_user$email","name","toLowerCase","includes","email","className","children","position","onClick","type","placeholder","value","onChange","e","target","userType","title","length"],"sources":["C:/Users/omkar/Desktop/New Project/frontend/src/components/Dashboard/UserManagement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { FaUserAlt, FaTrash, FaBan, FaCheck } from 'react-icons/fa';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './UserManagement.css';\n\nconst UserManagement = ({ onBack }) => {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  const fetchUsers = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get('http://localhost:5002/api/users', {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setUsers(response.data);\n    } catch (error) {\n      toast.error(error.response?.data?.message || 'Error fetching users');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleStatusChange = async (userId, newStatus) => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.put(\n        `http://localhost:5002/api/users/${userId}/status`,\n        { status: newStatus },\n        { headers: { Authorization: `Bearer ${token}` }}\n      );\n      \n      setUsers(users.map(user => \n        user._id === userId ? { ...user, status: newStatus } : user\n      ));\n      \n      toast.success(`User ${newStatus === 'active' ? 'activated' : 'suspended'} successfully`);\n    } catch (error) {\n      toast.error(error.response?.data?.message || 'Error updating user status');\n    }\n  };\n\n  const handleDeleteUser = async (userId) => {\n    if (!window.confirm('Are you sure you want to delete this user?')) return;\n\n    try {\n      const token = localStorage.getItem('token');\n      await axios.delete(`http://localhost:5002/api/users/${userId}`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      \n      setUsers(users.filter(user => user._id !== userId));\n      toast.success('User deleted successfully');\n    } catch (error) {\n      toast.error(error.response?.data?.message || 'Error deleting user');\n    }\n  };\n\n  const filteredUsers = users.filter(user => \n    user.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    user.email?.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  if (loading) {\n    return <div className=\"loading\">Loading...</div>;\n  }\n\n  return (\n    <div className=\"user-management\">\n      <ToastContainer position=\"top-right\" />\n      \n      <div className=\"user-management-header\">\n        <div className=\"header-left\">\n          <button className=\"back-button\" onClick={onBack}>\n            ‚Üê Back to Dashboard\n          </button>\n          <h2>User Management</h2>\n        </div>\n        <div className=\"search-bar\">\n          <input\n            type=\"text\"\n            placeholder=\"Search users...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n        </div>\n      </div>\n\n      <div className=\"users-grid\">\n        {filteredUsers.map(user => (\n          <div key={user._id} className={`user-card ${user.status}`}>\n            <div className=\"user-icon\">\n              <FaUserAlt />\n            </div>\n            <div className=\"user-info\">\n              <h3>{user.name}</h3>\n              <p>{user.email}</p>\n              <p className=\"user-type\">Type: {user.userType}</p>\n              <p className={`user-status ${user.status}`}>\n                Status: {user.status}\n              </p>\n            </div>\n            <div className=\"user-actions\">\n              {user.status === 'active' ? (\n                <button\n                  className=\"suspend-button\"\n                  onClick={() => handleStatusChange(user._id, 'suspended')}\n                  title=\"Suspend User\"\n                >\n                  <FaBan />\n                </button>\n              ) : (\n                <button\n                  className=\"activate-button\"\n                  onClick={() => handleStatusChange(user._id, 'active')}\n                  title=\"Activate User\"\n                >\n                  <FaCheck />\n                </button>\n              )}\n              <button\n                className=\"delete-button\"\n                onClick={() => handleDeleteUser(user._id)}\n                title=\"Delete User\"\n              >\n                <FaTrash />\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {filteredUsers.length === 0 && (\n        <div className=\"no-users\">\n          {searchTerm ? 'No users found matching your search.' : 'No users available.'}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default UserManagement;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,OAAO,CAAEC,KAAK,CAAEC,OAAO,KAAQ,gBAAgB,CACnE,OAASC,cAAc,CAAEC,KAAK,KAAQ,gBAAgB,CACtD,MAAO,uCAAuC,CAC9C,MAAO,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9B,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAgB,IAAf,CAAEC,MAAO,CAAC,CAAAD,IAAA,CAChC,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACkB,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACoB,UAAU,CAAEC,aAAa,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAEhDC,SAAS,CAAC,IAAM,CACdqB,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAxB,KAAK,CAACyB,GAAG,CAAC,iCAAiC,CAAE,CAClEC,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUN,KAAK,EAAG,CAC9C,CAAC,CAAC,CACFN,QAAQ,CAACS,QAAQ,CAACI,IAAI,CAAC,CACzB,CAAE,MAAOC,KAAK,CAAE,KAAAC,eAAA,CAAAC,oBAAA,CACdzB,KAAK,CAACuB,KAAK,CAAC,EAAAC,eAAA,CAAAD,KAAK,CAACL,QAAQ,UAAAM,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBF,IAAI,UAAAG,oBAAA,iBAApBA,oBAAA,CAAsBC,OAAO,GAAI,sBAAsB,CAAC,CACtE,CAAC,OAAS,CACRf,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAgB,kBAAkB,CAAG,KAAAA,CAAOC,MAAM,CAAEC,SAAS,GAAK,CACtD,GAAI,CACF,KAAM,CAAAd,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAvB,KAAK,CAACoC,GAAG,CACb,mCAAmCF,MAAM,SAAS,CAClD,CAAEG,MAAM,CAAEF,SAAU,CAAC,CACrB,CAAET,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUN,KAAK,EAAG,CAAC,CACjD,CAAC,CAEDN,QAAQ,CAACD,KAAK,CAACwB,GAAG,CAACC,IAAI,EACrBA,IAAI,CAACC,GAAG,GAAKN,MAAM,CAAG,CAAE,GAAGK,IAAI,CAAEF,MAAM,CAAEF,SAAU,CAAC,CAAGI,IACzD,CAAC,CAAC,CAEFjC,KAAK,CAACmC,OAAO,CAAC,QAAQN,SAAS,GAAK,QAAQ,CAAG,WAAW,CAAG,WAAW,eAAe,CAAC,CAC1F,CAAE,MAAON,KAAK,CAAE,KAAAa,gBAAA,CAAAC,qBAAA,CACdrC,KAAK,CAACuB,KAAK,CAAC,EAAAa,gBAAA,CAAAb,KAAK,CAACL,QAAQ,UAAAkB,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBd,IAAI,UAAAe,qBAAA,iBAApBA,qBAAA,CAAsBX,OAAO,GAAI,4BAA4B,CAAC,CAC5E,CACF,CAAC,CAED,KAAM,CAAAY,gBAAgB,CAAG,KAAO,CAAAV,MAAM,EAAK,CACzC,GAAI,CAACW,MAAM,CAACC,OAAO,CAAC,4CAA4C,CAAC,CAAE,OAEnE,GAAI,CACF,KAAM,CAAAzB,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAvB,KAAK,CAAC+C,MAAM,CAAC,mCAAmCb,MAAM,EAAE,CAAE,CAC9DR,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUN,KAAK,EAAG,CAC9C,CAAC,CAAC,CAEFN,QAAQ,CAACD,KAAK,CAACkC,MAAM,CAACT,IAAI,EAAIA,IAAI,CAACC,GAAG,GAAKN,MAAM,CAAC,CAAC,CACnD5B,KAAK,CAACmC,OAAO,CAAC,2BAA2B,CAAC,CAC5C,CAAE,MAAOZ,KAAK,CAAE,KAAAoB,gBAAA,CAAAC,qBAAA,CACd5C,KAAK,CAACuB,KAAK,CAAC,EAAAoB,gBAAA,CAAApB,KAAK,CAACL,QAAQ,UAAAyB,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBrB,IAAI,UAAAsB,qBAAA,iBAApBA,qBAAA,CAAsBlB,OAAO,GAAI,qBAAqB,CAAC,CACrE,CACF,CAAC,CAED,KAAM,CAAAmB,aAAa,CAAGrC,KAAK,CAACkC,MAAM,CAACT,IAAI,OAAAa,UAAA,CAAAC,WAAA,OACrC,EAAAD,UAAA,CAAAb,IAAI,CAACe,IAAI,UAAAF,UAAA,iBAATA,UAAA,CAAWG,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACtC,UAAU,CAACqC,WAAW,CAAC,CAAC,CAAC,KAAAF,WAAA,CAC3Dd,IAAI,CAACkB,KAAK,UAAAJ,WAAA,iBAAVA,WAAA,CAAYE,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACtC,UAAU,CAACqC,WAAW,CAAC,CAAC,CAAC,GAC9D,CAAC,CAED,GAAIvC,OAAO,CAAE,CACX,mBAAOR,IAAA,QAAKkD,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,YAAU,CAAK,CAAC,CAClD,CAEA,mBACEjD,KAAA,QAAKgD,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BnD,IAAA,CAACH,cAAc,EAACuD,QAAQ,CAAC,WAAW,CAAE,CAAC,cAEvClD,KAAA,QAAKgD,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrCjD,KAAA,QAAKgD,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BnD,IAAA,WAAQkD,SAAS,CAAC,aAAa,CAACG,OAAO,CAAEhD,MAAO,CAAA8C,QAAA,CAAC,0BAEjD,CAAQ,CAAC,cACTnD,IAAA,OAAAmD,QAAA,CAAI,iBAAe,CAAI,CAAC,EACrB,CAAC,cACNnD,IAAA,QAAKkD,SAAS,CAAC,YAAY,CAAAC,QAAA,cACzBnD,IAAA,UACEsD,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,iBAAiB,CAC7BC,KAAK,CAAE9C,UAAW,CAClB+C,QAAQ,CAAGC,CAAC,EAAK/C,aAAa,CAAC+C,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAChD,CAAC,CACC,CAAC,EACH,CAAC,cAENxD,IAAA,QAAKkD,SAAS,CAAC,YAAY,CAAAC,QAAA,CACxBR,aAAa,CAACb,GAAG,CAACC,IAAI,eACrB7B,KAAA,QAAoBgD,SAAS,CAAE,aAAanB,IAAI,CAACF,MAAM,EAAG,CAAAsB,QAAA,eACxDnD,IAAA,QAAKkD,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBnD,IAAA,CAACP,SAAS,GAAE,CAAC,CACV,CAAC,cACNS,KAAA,QAAKgD,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnD,IAAA,OAAAmD,QAAA,CAAKpB,IAAI,CAACe,IAAI,CAAK,CAAC,cACpB9C,IAAA,MAAAmD,QAAA,CAAIpB,IAAI,CAACkB,KAAK,CAAI,CAAC,cACnB/C,KAAA,MAAGgD,SAAS,CAAC,WAAW,CAAAC,QAAA,EAAC,QAAM,CAACpB,IAAI,CAAC6B,QAAQ,EAAI,CAAC,cAClD1D,KAAA,MAAGgD,SAAS,CAAE,eAAenB,IAAI,CAACF,MAAM,EAAG,CAAAsB,QAAA,EAAC,UAClC,CAACpB,IAAI,CAACF,MAAM,EACnB,CAAC,EACD,CAAC,cACN3B,KAAA,QAAKgD,SAAS,CAAC,cAAc,CAAAC,QAAA,EAC1BpB,IAAI,CAACF,MAAM,GAAK,QAAQ,cACvB7B,IAAA,WACEkD,SAAS,CAAC,gBAAgB,CAC1BG,OAAO,CAAEA,CAAA,GAAM5B,kBAAkB,CAACM,IAAI,CAACC,GAAG,CAAE,WAAW,CAAE,CACzD6B,KAAK,CAAC,cAAc,CAAAV,QAAA,cAEpBnD,IAAA,CAACL,KAAK,GAAE,CAAC,CACH,CAAC,cAETK,IAAA,WACEkD,SAAS,CAAC,iBAAiB,CAC3BG,OAAO,CAAEA,CAAA,GAAM5B,kBAAkB,CAACM,IAAI,CAACC,GAAG,CAAE,QAAQ,CAAE,CACtD6B,KAAK,CAAC,eAAe,CAAAV,QAAA,cAErBnD,IAAA,CAACJ,OAAO,GAAE,CAAC,CACL,CACT,cACDI,IAAA,WACEkD,SAAS,CAAC,eAAe,CACzBG,OAAO,CAAEA,CAAA,GAAMjB,gBAAgB,CAACL,IAAI,CAACC,GAAG,CAAE,CAC1C6B,KAAK,CAAC,aAAa,CAAAV,QAAA,cAEnBnD,IAAA,CAACN,OAAO,GAAE,CAAC,CACL,CAAC,EACN,CAAC,GArCEqC,IAAI,CAACC,GAsCV,CACN,CAAC,CACC,CAAC,CAELW,aAAa,CAACmB,MAAM,GAAK,CAAC,eACzB9D,IAAA,QAAKkD,SAAS,CAAC,UAAU,CAAAC,QAAA,CACtBzC,UAAU,CAAG,sCAAsC,CAAG,qBAAqB,CACzE,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAP,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}