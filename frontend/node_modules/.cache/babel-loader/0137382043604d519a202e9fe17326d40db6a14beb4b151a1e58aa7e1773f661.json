{"ast":null,"code":"import React,{useState,useEffect,useRef,useCallback}from'react';import{Link,useNavigate}from'react-router-dom';import{FaUser,FaBars,FaTimes}from'react-icons/fa';import'./Navbar.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Navbar=()=>{const navigate=useNavigate();const[isLoggedIn,setIsLoggedIn]=useState(false);const[showPopover,setShowPopover]=useState(false);const[showMobileMenu,setShowMobileMenu]=useState(false);const[user,setUser]=useState(null);const popoverRef=useRef(null);const mobileMenuRef=useRef(null);const checkAuthStatus=useCallback(()=>{const userData=localStorage.getItem('user');const token=localStorage.getItem('token');if(userData&&token){setIsLoggedIn(true);setUser(JSON.parse(userData));}else{setIsLoggedIn(false);setUser(null);}},[]);useEffect(()=>{checkAuthStatus();window.addEventListener('userLogin',checkAuthStatus);window.addEventListener('storage',checkAuthStatus);return()=>{window.removeEventListener('userLogin',checkAuthStatus);window.removeEventListener('storage',checkAuthStatus);};},[checkAuthStatus]);useEffect(()=>{const handleClickOutside=event=>{if(popoverRef.current&&!popoverRef.current.contains(event.target)){setShowPopover(false);}if(mobileMenuRef.current&&!mobileMenuRef.current.contains(event.target)){setShowMobileMenu(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>document.removeEventListener('mousedown',handleClickOutside);},[]);const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('user');setIsLoggedIn(false);setUser(null);setShowPopover(false);setShowMobileMenu(false);window.dispatchEvent(new Event('userLogin'));navigate('/');};const handleViewProfile=()=>{setShowPopover(false);setShowMobileMenu(false);navigate('/profile');};const handleNavigation=path=>{setShowMobileMenu(false);navigate(path);};return/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-brand\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Tiffin Service\"}),/*#__PURE__*/_jsx(\"button\",{className:\"mobile-menu-button\",onClick:()=>setShowMobileMenu(!showMobileMenu),children:showMobileMenu?/*#__PURE__*/_jsx(FaTimes,{}):/*#__PURE__*/_jsx(FaBars,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:`navbar-links ${showMobileMenu?'show-mobile':''}`,ref:mobileMenuRef,children:[/*#__PURE__*/_jsx(Link,{to:\"/\",onClick:()=>setShowMobileMenu(false),children:\"Home\"}),isLoggedIn&&user&&/*#__PURE__*/_jsx(Link,{to:user.userType==='admin'?'/admin/dashboard':'/member/dashboard',className:\"dashboard-link\",onClick:()=>setShowMobileMenu(false),children:\"Dashboard\"}),isLoggedIn&&user?/*#__PURE__*/_jsxs(\"div\",{className:\"profile-section\",ref:popoverRef,children:[/*#__PURE__*/_jsxs(\"button\",{className:\"profile-button\",onClick:()=>setShowPopover(!showPopover),children:[/*#__PURE__*/_jsx(FaUser,{className:\"profile-icon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"profile-name\",children:user.name||'User'})]}),showPopover&&/*#__PURE__*/_jsxs(\"div\",{className:\"profile-popover\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleViewProfile,children:\"View Profile\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"auth-links\",children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",onClick:()=>setShowMobileMenu(false),children:\"Login\"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",onClick:()=>setShowMobileMenu(false),children:\"Sign Up\"})]})]})]});};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Link","useNavigate","FaUser","FaBars","FaTimes","jsx","_jsx","jsxs","_jsxs","Navbar","navigate","isLoggedIn","setIsLoggedIn","showPopover","setShowPopover","showMobileMenu","setShowMobileMenu","user","setUser","popoverRef","mobileMenuRef","checkAuthStatus","userData","localStorage","getItem","token","JSON","parse","window","addEventListener","removeEventListener","handleClickOutside","event","current","contains","target","document","handleLogout","removeItem","dispatchEvent","Event","handleViewProfile","handleNavigation","path","className","children","to","onClick","ref","userType","name"],"sources":["C:/Users/omkar/Desktop/New Project/frontend/src/components/Navbar.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { FaUser, FaBars, FaTimes } from 'react-icons/fa';\nimport './Navbar.css';\n\nconst Navbar = () => {\n  const navigate = useNavigate();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [showPopover, setShowPopover] = useState(false);\n  const [showMobileMenu, setShowMobileMenu] = useState(false);\n  const [user, setUser] = useState(null);\n  const popoverRef = useRef(null);\n  const mobileMenuRef = useRef(null);\n\n  const checkAuthStatus = useCallback(() => {\n    const userData = localStorage.getItem('user');\n    const token = localStorage.getItem('token');\n    \n    if (userData && token) {\n      setIsLoggedIn(true);\n      setUser(JSON.parse(userData));\n    } else {\n      setIsLoggedIn(false);\n      setUser(null);\n    }\n  }, []);\n\n  useEffect(() => {\n    checkAuthStatus();\n    window.addEventListener('userLogin', checkAuthStatus);\n    window.addEventListener('storage', checkAuthStatus);\n\n    return () => {\n      window.removeEventListener('userLogin', checkAuthStatus);\n      window.removeEventListener('storage', checkAuthStatus);\n    };\n  }, [checkAuthStatus]);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (popoverRef.current && !popoverRef.current.contains(event.target)) {\n        setShowPopover(false);\n      }\n      if (mobileMenuRef.current && !mobileMenuRef.current.contains(event.target)) {\n        setShowMobileMenu(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    setIsLoggedIn(false);\n    setUser(null);\n    setShowPopover(false);\n    setShowMobileMenu(false);\n    window.dispatchEvent(new Event('userLogin'));\n    navigate('/');\n  };\n\n  const handleViewProfile = () => {\n    setShowPopover(false);\n    setShowMobileMenu(false);\n    navigate('/profile');\n  };\n\n  const handleNavigation = (path) => {\n    setShowMobileMenu(false);\n    navigate(path);\n  };\n\n  return (\n    <nav className=\"navbar\">\n      <div className=\"navbar-brand\">\n        <Link to=\"/\">Tiffin Service</Link>\n        <button \n          className=\"mobile-menu-button\"\n          onClick={() => setShowMobileMenu(!showMobileMenu)}\n        >\n          {showMobileMenu ? <FaTimes /> : <FaBars />}\n        </button>\n      </div>\n\n      <div className={`navbar-links ${showMobileMenu ? 'show-mobile' : ''}`} ref={mobileMenuRef}>\n        <Link to=\"/\" onClick={() => setShowMobileMenu(false)}>Home</Link>\n        {isLoggedIn && user && (\n          <Link \n            to={user.userType === 'admin' ? '/admin/dashboard' : '/member/dashboard'} \n            className=\"dashboard-link\"\n            onClick={() => setShowMobileMenu(false)}\n          >\n            Dashboard\n          </Link>\n        )}\n        {isLoggedIn && user ? (\n          <div className=\"profile-section\" ref={popoverRef}>\n            <button \n              className=\"profile-button\"\n              onClick={() => setShowPopover(!showPopover)}\n            >\n              <FaUser className=\"profile-icon\" />\n              <span className=\"profile-name\">{user.name || 'User'}</span>\n            </button>\n            {showPopover && (\n              <div className=\"profile-popover\">\n                <button onClick={handleViewProfile}>View Profile</button>\n                <button onClick={handleLogout}>Logout</button>\n              </div>\n            )}\n          </div>\n        ) : (\n          <div className=\"auth-links\">\n            <Link to=\"/login\" onClick={() => setShowMobileMenu(false)}>Login</Link>\n            <Link to=\"/signup\" onClick={() => setShowMobileMenu(false)}>Sign Up</Link>\n          </div>\n        )}\n      </div>\n    </nav>\n  );\n};\n\nexport default Navbar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}